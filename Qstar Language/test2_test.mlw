module Main

use export binary.Bit_vector
use wired_circuits.Circuit_c
use export p_int.Int_comp
use ref.Ref

let main (n:int) (c:circuit) : circuit
    requires {true}
    ensures {true}
    =
    if (n=0)
    then
        begin
        	assert{true};
            c
        end
    else
        begin
        	let c' = ref (m_skip n)
            in
            c':= !c' -- (place hadamard 0 n);
            assert {true};
            c':= !c' -- (place x 0 n);
            assert {true};
        end
end